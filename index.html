<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Для тебя — наш мир</title>
  <meta name="description" content="Романтический сайт‑подарок: герой‑экран, лирика, галерея из 12 фото с анимацией, музыка и секретное письмо." />
  <meta name="theme-color" content="#f7e6eb" />
  <link rel="preload" as="image" href="photos/cover.jpg" />
  <style>
    :root{
      --bg:#fff9fb; --card:#ffffff; --ink:#1f1d22; --muted:#6e6470;
      --rose:#ff8fb1; --rose-2:#ffd0dc; --shadow:0 10px 30px rgba(0,0,0,.10);
      --rad:22px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;scroll-behavior:smooth}
    body{font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif; color:var(--ink); background:linear-gradient(180deg, var(--bg), #fff)}
    a{color:var(--rose);text-decoration:none}
    .container{max-width:1180px;margin:0 auto;padding:28px}

    /* HERO */
    .hero{min-height:92dvh;display:grid;place-items:center;padding:24px;background:radial-gradient(1200px 600px at 70% -10%, #ffeef6 0%, transparent 60%), url('photos/cover.jpg') center/cover fixed no-repeat;position:relative;}
    .veil{position:absolute;inset:0;background:rgba(255,255,255,.55);backdrop-filter: blur(2px)}
    .hero-card{position:relative;z-index:1;max-width:820px;background:var(--card);box-shadow:var(--shadow);border-radius:var(--rad);padding:36px 30px;border:1px solid #f5e3ea}
    .title{font-size:clamp(30px, 3.8vw, 56px);letter-spacing:.3px;margin:0 0 10px;font-weight:900}
    .subtitle{margin:0;color:var(--muted);font-size:clamp(14px,1.6vw,18px)}
    .cta{margin-top:22px;display:flex;gap:12px;flex-wrap:wrap}
    .btn{appearance:none;border:0;border-radius:999px;padding:12px 18px;cursor:pointer;font-weight:750;box-shadow:var(--shadow);transition:.2s transform, .2s box-shadow;background:var(--rose);color:#fff}
    .btn.alt{background:#fff;color:var(--ink);border:1px solid #eee}
    .btn:hover{transform:translateY(-2px)}

    /* SECTIONS */
    .section{padding:68px 0}
    .section h2{font-size:clamp(22px,2.4vw,34px);margin:0 0 18px}
    .lead{color:var(--muted);max-width:780px}

    /* TIMELINE */
    .timeline{display:grid;gap:18px;margin-top:24px}
    .moment{background:var(--card);border:1px solid #f3e7ed;border-radius:16px;padding:18px 18px;box-shadow:var(--shadow);display:grid;grid-template-columns:120px 1fr;gap:16px;align-items:center}
    .moment .date{font-weight:800;color:#b15374}
    .moment .text{color:#40363f}

    /* GALLERY */
    .grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(220px,1fr));gap:18px;margin-top:26px}
    .ph{position:relative;overflow:hidden;border-radius:18px;border:1px solid #f0e5ea;background:linear-gradient(180deg,#fff, #fff7fb)}
    .ph img{width:100%;height:260px;object-fit:cover;display:block;transform:scale(1.02) translateZ(0);transition:transform .5s ease, filter .5s ease}
    .ph:hover img{transform:scale(1.06)}
    .ph .cap{position:absolute;left:0;right:0;bottom:0;background:linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.55));color:#fff;padding:12px 14px;font-size:14px}

    /* ENTRANCE ANIMS */
    .reveal{opacity:0;transform:translateY(16px);transition:opacity .6s ease, transform .6s ease}
    .reveal.in{opacity:1;transform:none}

    /* LIGHTBOX */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.88);display:none;align-items:center;justify-content:center;z-index:50}
    .lightbox.open{display:flex}
    .lb-inner{position:relative;max-width:min(92vw,1180px);max-height:86vh}
    .lb-inner img{max-width:100%;max-height:86vh;border-radius:14px;display:block}
    .lb-cap{color:#fff;text-align:center;margin-top:10px}
    .lb-x,.lb-prev,.lb-next{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.92);border:0;border-radius:999px;width:46px;height:46px;display:grid;place-items:center;cursor:pointer;box-shadow:var(--shadow)}
    .lb-x{top:-18px;right:-18px;transform:none}
    .lb-prev{left:-60px}
    .lb-next{right:-60px}
    @media (max-width:900px){.lb-prev{left:8px}.lb-next{right:8px}.lb-x{right:8px;top:8px}}

    /* SECRET LETTER */
    .secret{margin-top:30px;display:flex;align-items:center;gap:10px}
    .heart{width:30px;height:30px;display:inline-grid;place-items:center;border-radius:50%;background:var(--rose-2);border:1px solid #f2c4d1;cursor:pointer;transition:transform .2s}
    .heart:hover{transform:scale(1.08)}

    /* PLAYER */
    .player{display:flex;align-items:center;gap:10px;margin-top:14px}

    /* FOOTER */
    footer{padding:40px 0 60px;color:#7b6c76;text-align:center}

    /* SMALL UTIL */
    .card{background:var(--card);border:1px solid #f3e7ed;border-radius:16px;padding:18px;box-shadow:var(--shadow)}
  </style>
</head>
<body>
  <!-- HERO -->
  <section class="hero" id="home" aria-label="Hero">
    <div class="veil" aria-hidden="true"></div>
    <div class="hero-card reveal in">
      <h1 class="title">Для тебя</h1>
      <p class="subtitle">Мне нравится, как прошлое шепчет и будущее улыбается, когда я думаю о нас.</p>
      <div class="cta">
        <a class="btn" href="#moments">Наши моменты</a>
        <button class="btn alt" id="playBtn" aria-label="Воспроизвести музыку">▶︎ Музыка</button>
      </div>
      <div class="player">
        <audio id="song" preload="auto" src="audio/your-song.mp3"></audio>
        <small style="color:var(--muted)">* Нажми «Музыка», если хочешь атмосферу</small>
      </div>
      <div class="secret" title="Небольшой сюрприз">
        <span>Секретное письмо</span>
        <button class="heart" id="heart" aria-label="Открыть секрет">❤</button>
        <small class="muted" style="color:var(--muted)">кликни сердечко три раза</small>
      </div>
    </div>
  </section>

  <!-- TIMELINE / LYRICS -->
  <section class="section" id="words">
    <div class="container">
      <h2>Лирика</h2>
      <p class="lead">Пусть слова будут простыми, как дыхание — без лишнего сахара, зато честно и навсегда.</p>
      <div class="timeline" id="timeline"></div>
    </div>
  </section>

  <!-- GALLERY (12 фото) -->
  <section class="section" id="moments">
    <div class="container">
      <h2>Наши моменты</h2>
      <p class="lead">Двенадцать осколков света — весь альбом на одной волне.</p>
      <div class="grid" id="gallery"></div>
    </div>
  </section>

  <footer>
    Сделано с вниманием и упрямой нежностью.
  </footer>

  <!-- LIGHTBOX -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Просмотр фото">
    <div class="lb-inner">
      <img id="lbImg" alt="" />
      <div class="lb-cap" id="lbCap"></div>
      <button class="lb-x" id="lbClose" aria-label="Закрыть">✕</button>
      <button class="lb-prev" id="lbPrev" aria-label="Предыдущее">◀</button>
      <button class="lb-next" id="lbNext" aria-label="Следующее">▶</button>
    </div>
  </div>

  <!-- SECRET MODAL -->
  <dialog id="secretModal" style="border:0;border-radius:16px;padding:0;max-width:min(92vw,720px);">
    <form method="dialog" style="margin:0">
      <div class="card">
        <h3 style="margin-top:6px">Письмо</h3>
        <p id="secretText" style="color:#3b3238"></p>
        <div style="display:flex;justify-content:flex-end;gap:10px;margin-top:10px">
          <button class="btn alt">Закрыть</button>
        </div>
      </div>
    </form>
  </dialog>

  <noscript>Для просмотра сайта включите JavaScript.</noscript>

  <script>
    // ====== ДАННЫЕ ======
    const LYRICS = [
      { date: 'Первая встреча', text: 'Я не искал пути и не считал шагов — просто увидел тебя и понял: домой.' },
      { date: 'Тёплый вечер', text: 'Мы смеялись над глупостями, пока город зажигал фонари, как небесные веснушки.' },
      { date: 'Обещание', text: 'Если сомнения — я рядом. Если радость — разделим. Если ночь — я доскажу за звёзды.' },
    ];

    // 12 фото (1..12.jpg)
    const IMAGES = Array.from({length:12}, (_,i)=>{
      const n = i+1; return { src: `photos/${n}.jpg`, cap: `Момент ${n}` };
    });

    // ====== ПОЯВЛЕНИЕ ПРИ СКРОЛЛЕ ======
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('in'); });
    }, {threshold: .15});

    // ====== TIMELINE ======
    const tl = document.getElementById('timeline');
    LYRICS.forEach(m => {
      const el = document.createElement('div');
      el.className = 'moment reveal';
      el.innerHTML = `<div class="date">${m.date}</div><div class="text">${m.text}</div>`;
      tl.appendChild(el); io.observe(el);
    });

    // ====== GALLERY ======
    const gal = document.getElementById('gallery');
    IMAGES.forEach((p, idx) => {
      const card = document.createElement('a');
      card.href = p.src; card.className = 'ph reveal'; card.dataset.index = idx;
      const img = document.createElement('img'); img.loading = 'lazy'; img.src = p.src; img.alt = p.cap || '';
      const cap = document.createElement('div'); cap.className = 'cap'; cap.textContent = p.cap || '';
      card.appendChild(img); card.appendChild(cap);
      card.addEventListener('click', (e)=>{ e.preventDefault(); openLightbox(idx); });
      gal.appendChild(card); io.observe(card);
    });

    // ====== LIGHTBOX ======
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const lbCap = document.getElementById('lbCap');
    const lbClose = document.getElementById('lbClose');
    const lbPrev = document.getElementById('lbPrev');
    const lbNext = document.getElementById('lbNext');
    let current = 0;

    function updateLightbox(){ const p = IMAGES[current]; lbImg.src = p.src; lbImg.alt = p.cap||''; lbCap.textContent = p.cap||''; }
    function openLightbox(i){ current = i; updateLightbox(); lb.classList.add('open'); document.body.style.overflow='hidden'; }
    function closeLightbox(){ lb.classList.remove('open'); document.body.style.overflow='auto'; }
    function step(dir){ current = (current + dir + IMAGES.length) % IMAGES.length; updateLightbox(); }
    lbClose.addEventListener('click', closeLightbox);
    lbPrev.addEventListener('click', ()=>step(-1));
    lbNext.addEventListener('click', ()=>step(1));
    lb.addEventListener('click', (e)=>{ if(e.target===lb) closeLightbox(); });
    window.addEventListener('keydown', (e)=>{ if(!lb.classList.contains('open')) return; if(e.key==='Escape') closeLightbox(); if(e.key==='ArrowLeft') step(-1); if(e.key==='ArrowRight') step(1); });

    // ====== AUDIO ======
    const song = document.getElementById('song');
    const playBtn = document.getElementById('playBtn');
    let playing = false;
    playBtn.addEventListener('click', async()=>{
      try{
        if(!playing){ await song.play(); playing = true; playBtn.textContent = '⏸ Пауза'; }
        else { song.pause(); playing = false; playBtn.textContent = '▶︎ Музыка'; }
      }catch(err){ alert('Браузер заблокировал автозапуск. Попробуй ещё раз.'); }
    });

    // ====== SECRET ======
    const heart = document.getElementById('heart');
    const secretModal = document.getElementById('secretModal');
    const secretText = document.getElementById('secretText');
    const SECRET_MESSAGE = 'Ты — моё любимое совпадение. Если мир когда‑нибудь спросит, где мой дом — я назову твоё имя.';
    let clicks = 0; let timer;
    function resetSecretCounter(){ clicks = 0; clearTimeout(timer); }
    function secretClick(){ clicks++; clearTimeout(timer); if(clicks>=3){ resetSecretCounter(); secretText.textContent = SECRET_MESSAGE; if(typeof secretModal.showModal === 'function') secretModal.showModal(); else alert(SECRET_MESSAGE); } else { timer = setTimeout(()=> clicks=0, 900); } }
    heart.addEventListener('click', secretClick);
  </script>
</body>
</html>
